{
  "author": {
    "name": "Matt McKegg",
    "email": "matt@wetsand.co.nz",
    "url": "http://twitter.com/MattMcKegg"
  },
  "name": "json-query",
  "description": "Retrieves values from JSON objects for data binding. Offers params, nested queries, deep queries, custom reduce/filter functions and simple boolean logic. Browserify compatible.",
  "version": "1.4.0",
  "homepage": "http://github.com/mmckegg/json-query",
  "repository": {
    "type": "git",
    "url": "git://github.com/mmckegg/json-query.git"
  },
  "main": "index.js",
  "scripts": {
    "test": "tap test/*.js --tap"
  },
  "devDependencies": {
    "tape": "*",
    "es5-shim": "~2.1.0"
  },
  "optionalDependencies": {},
  "engines": {
    "node": "*"
  },
  "keywords": [
    "data binding",
    "filter",
    "json",
    "query"
  ],
  "testling": {
    "files": "test/*.js",
    "browsers": [
      "chrome/20.0",
      "chrome/25.0",
      "chrome/latest",
      "chrome/canary",
      "firefox/3.6",
      "firefox/20.0",
      "firefox/latest",
      "firefox/nightly",
      "opera/12.0",
      "opera/latest",
      "safari/4.0",
      "safari/latest",
      "opera/next",
      "iphone/6.0..latest",
      "ipad/6.0..latest",
      "safari/6.0..latest",
      "android-browser/4.2..latest",
      "iexplore/6.0",
      "iexplore/9.0..latest"
    ]
  },
  "readme": "JSON Query\n===\n\n[![browser support](https://ci.testling.com/mmckegg/json-query.png)](https://ci.testling.com/mmckegg/json-query)\n\nRetrieves values from JSON objects for data binding. Offers params, nested queries, deep queries, custom reduce/filter functions and simple boolean logic.\n\nUsed internally by [JSON Context](https://github.com/mmckegg/json-context) for data binding.\n\n## Install\n\n```bash\n$ npm install json-query\n```\n\n### jsonQuery(query, options)\n\nSpecify a query and what to query - returns an object that describes the result of the query.\n\n```js\nvar jsonQuery = require('json-query')\n\nvar data = {\n  people: [\n    {name: 'Matt', country: 'NZ'},\n    {name: 'Pete', country: 'AU'}\n  ]\n}\n\njsonQuery('people[country=NZ].name', {\n  data: data\n}) //=> {value: 'Matt', parents: [...], key: 0} ... etc\n```\n\n#### options:\n\n- **data** or **rootContext**: The main JS object to query.\n- **source** or **context** (optional): The current object we're interested in. Is accessed in query by starting with `.`\n- **parent** (optional): An additional context for looking further up the tree. Is accessed by `..`\n- **locals**: Specify an object containing helper functions. Accessed by ':filterName'. Expects function(input, args...) with `this` set to original passed in options.\n- **globals**: Falls back to globals when no local function found.\n- **force** (optional): Specify an object to be returned from the query if the query fails - it will be saved into the place the query expected the object to be.\n\n## Queries\n\nQueries are strings that describe an object or value to pluck out, or manipulate from the context object. The syntax is a little bit CSS, a little bit JS, but pretty powerful.\n\n### Accessing properties (dot notation)\n\n`person.name`\n\n### Array accessors\n\n`people[0]`\n\n### Array filter\n\n`people[country=NZ]`\n\n### Or syntax\n\n`person.greetingName|person.name`\n\n### Deep queries\n\nSearch through multiple levels of Objects/Arrays\n\n```js\nvar data = {\n  grouped_people: {\n    'friends': [\n      {name: 'Steve', country: 'NZ'},\n      {name: 'Bob', country: 'US'}\n    ],\n    'enemies': [\n      {name: 'Evil Steve', country: 'AU'}\n    ]\n  }\n}\n\njsonQuery('grouped_people[][country=NZ]', {data: data})\n```\n### Inner queries\n\n```js\nvar data = {\n  page: {\n    id: 'page_1',\n    title: 'Test'\n  },\n  comments_lookup: {\n    'page_1': [\n      {id: 'comment_1', parent_id: 'page_1', content: \"I am a comment\"}\n    ]\n  }\n}\n\n// get the comments that match page's id\njsonQuery('comments_lookup[{page.id}]', {data: data})\n```\n\n### Local functions (helpers)\n\nAllows to to hack the query system to do just about anything.\n\nSome nicely contrived examples:\n\n```js\nvar locals = {\n  greetingName: function(input){\n    if (input.knownAs){\n      return input.known_as\n    } else {\n      return input.name\n    }\n  }\n  },\n  and: function(inputA, inputB){\n    return inputA && inputB\n  },\n  text: function(input, text){\n    return text\n  },\n  then: function(input, thenValue, elseValue){\n    if (input){\n      return thenValue\n    } else {\n      return elseValue\n    }\n  }\n}\n\nvar data = {\n  is_fullscreen: true,\n  is_playing: false,\n  user: {\n    name: \"Matthew McKegg\",\n    known_as: \"Matt\"\n  }\n}\n\njsonQuery('user:greetingName', {\n  data: data, locals: locals\n}).value //=> \"Matt\"\n\njsonQuery(['is_fullscreen:and({is_playing}):then(?, ?)', \"Playing big!\", \"Not so much\"], {\n  data: data, locals: locals\n}).value //=> \"Not so much\"\n\njsonQuery(':text(This displays text cos we made it so)', {\n  locals: locals\n}).value //=> \"This displays text cos we made it so\"\n\n```\n\n### Context\n\nSpecifying context ('data', 'source', and 'parent' options) is good for databinding and working on a specific object and still keeping the big picture available.\n\n```js\nvar data = {\n  styles: {\n    bold: 'font-weight:strong',\n    red: 'color: red'\n  },\n  paragraphs: [\n    {content: \"I am a red paragraph\", style: 'red'},\n    {content: \"I am a bold paragraph\", style: 'bold'},\n  ],\n}\n\nvar pageHtml = ''\ndata.paragraphs.forEach(function(paragraph){\n  var style = jsonQuery('styles[{.style}]', {data: data, source: paragraph}).value\n  var content = jsonQuery('.content', data: data, source: paragraph) // pretty pointless :)\n  pageHtml += \"<p style='\" + style \"'>\" + content + \"</p>\"\n})\n```\n\n## Query Params\n\nParams can be specified by passing in an array with the first param the query (with ? params) and subsequent params.\n\n```js\njsonQuery(['people[country=?]', 'NZ'])\n```\n\n## License\n\nMIT",
  "readmeFilename": "README.md",
  "bugs": {
    "url": "https://github.com/mmckegg/json-query/issues"
  },
  "dependencies": {},
  "_id": "json-query@1.4.0",
  "_from": "json-query@~1.4.0"
}
